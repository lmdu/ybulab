{% set mainmenu="settings" %}
{% extends "base.html" %}
{% block title %}帐号设置{% endblock %}
{% block head %}
<link href="{{ static('css/tabler-vendors.min.css') }}" rel="stylesheet">
{% endblock %}
{% block main %}
<div class="card">
  <div class="row g-0">
    <div class="col-12 col-md-3 border-end">
      <div class="card-body">
        <h4 class="subheader">帐号信息</h4>
        <div class="list-group list-group-transparent">
          <a href="{{ url('profile', kwargs={'action': 'view'}) }}" class="list-group-item list-group-item-action d-flex align-items-center">我的帐号</a>
          <a href="{{ url('setpass', kwargs={'action': 'view'}) }}" class="list-group-item list-group-item-action d-flex align-items-center active">修改密码</a>
        </div>
        <h4 class="subheader mt-4">其它信息</h4>
        <div class="list-group list-group-transparent">
          
        </div>
      </div>
    </div>
    <div class="col-12 col-md-9 d-flex flex-column">
      <form action="{{ url('setpass', kwargs={'action': 'edit'}) }}" method="post">
        <div class="card-body">
          <h2 class="mb-4">修改密码</h2>
          <div class="row g-3">
            <div class="col-md-6 col-sm-12">
              <div class="form-label">原始密码</div>
              <input type="password" class="form-control" name="old_passwd">
            </div>
          </div>
          <div class="row g-3 mt-3">
            <div class="col-md-6 col-sm-12">
              <div class="form-label">新密码</div>
              <input type="password" class="form-control" name="new_passwd">
            </div>
          </div>
          <div class="row g-3 mt-3">
            <div class="col-md-6 col-sm-12">
              <div class="form-label">重复新密码</div>
              <input type="password" class="form-control" name="new_passwd2">
            </div>
          </div>
        </div>
        <div class="card-footer bg-transparent mt-auto">
          <div class="btn-list justify-content-end">
            <button type="Submit" class="btn btn-primary">
              修改
            </button>
          </div>
        </div>
        <input type="hidden" name="uid" value="{{ request.user.id }}">
        {{ csrf_input }}
      </form>
    </div>
  </div>
</div>
{% endblock %}
{% block script %}
<script src="{{ static('js/select2.min.js') }}"></script>
<script src="{{ static('js/jquery.validate.min.js') }}"></script>
<script type="text/javascript">
$(document).ready(function(){
  $('#customer-form').validate({
    normalizer: function(value) {
      return $.trim(value);
    },
    errorClass: 'is-invalid',
    validClass: 'is-valid',
    rules: {
      last_name: {
        required: true
      },
      first_name: {
        required: true
      },
      email: {
        required: true,
        email: true
      }
    }
  });
});
</script>
{% endblock %}
